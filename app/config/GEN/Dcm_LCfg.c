/*
* Configuration of module: Dcm
*
* Created by:   parai          
* Copyright:    (C)parai@foxmail.com  
*
* Configured for (MCU):    MinGW ...
*
* Module vendor:           ArcCore
* Generator version:       2.0.34
*
* Generated by easySAR Studio (https://github.com/parai/OpenSAR)
*/

#include "Std_Types.h"
#include "Dcm.h"
#include "Dcm_Internal.h"
#include "PduR.h"

#define DCM_SECURITY_EOL_INDEX 5
#define DCM_SESSION_EOL_INDEX  4
#define DCM_DID_LIST_EOL_INDEX 3


static const Dcm_DspSecurityRowType DspSecurityList[] = {
    { // Default Security Level, that is for each session
        .DspSecurityLevel =  0,
        .DspSecurityDelayTimeOnBoot =  0,//Value is not configurable
        .DspSecurityNumAttDelay =  0,     //Value is not configurable
        .DspSecurityDelayTime =  0,     //Value is not configurable
        .DspSecurityNumAttLock =  0,     //Value is not configurable
        .DspSecurityADRSize =  0,
        .DspSecuritySeedSize =  4,
        .DspSecurityKeySize =  4,
        .GetSeed =  NULL,    // as each session entered, it is already in this level, cause send NRC
        .CompareKey =  NULL,
        .Arc_EOL =  FALSE
    },

    { // DS, Note: Level for session only, all function will only one security
        .DspSecurityLevel =  5,
        .DspSecurityDelayTimeOnBoot =  0,//Value is not configurable
        .DspSecurityNumAttDelay =  0,    //Value is not configurable
        .DspSecurityDelayTime =  0,      //Value is not configurable
        .DspSecurityNumAttLock =  0,     //Value is not configurable
        .DspSecurityADRSize =  0,
        .DspSecuritySeedSize =  4,
        .DspSecurityKeySize =  4,
        .GetSeed =  fGetSeed(DS),
        .CompareKey =  fCompareKey(DS),
        .Arc_EOL =  FALSE
    },

    { // PRGS, level,that is for easy implementation of an easyDcm .
        .DspSecurityLevel =  6,
        .DspSecurityDelayTimeOnBoot =  0,//Value is not configurable
        .DspSecurityNumAttDelay =  0,    //Value is not configurable
        .DspSecurityDelayTime =  0,      //Value is not configurable
        .DspSecurityNumAttLock =  0,     //Value is not configurable
        .DspSecurityADRSize =  0,
        .DspSecuritySeedSize =  4,
        .DspSecurityKeySize =  4,
        .GetSeed =  fGetSeed(PRGS),
        .CompareKey =  fCompareKey(PRGS),
        .Arc_EOL =  FALSE
    },

    { // EXTDS, 
        .DspSecurityLevel =  7,
        .DspSecurityDelayTimeOnBoot =  0,//Value is not configurable
        .DspSecurityNumAttDelay =  0,    //Value is not configurable
        .DspSecurityDelayTime =  0,      //Value is not configurable
        .DspSecurityNumAttLock =  0,     //Value is not configurable
        .DspSecurityADRSize =  0,
        .DspSecuritySeedSize =  4,
        .DspSecurityKeySize =  4,
        .GetSeed =  fGetSeed(EXTDS),
        .CompareKey =  fCompareKey(EXTDS),
        .Arc_EOL =  FALSE
    },

    { // SSDS, 
        .DspSecurityLevel =  8,
        .DspSecurityDelayTimeOnBoot =  0,//Value is not configurable
        .DspSecurityNumAttDelay =  0,    //Value is not configurable
        .DspSecurityDelayTime =  0,      //Value is not configurable
        .DspSecurityNumAttLock =  0,     //Value is not configurable
        .DspSecurityADRSize =  0,
        .DspSecuritySeedSize =  4,
        .DspSecurityKeySize =  4,
        .GetSeed =  fGetSeed(SSDS),
        .CompareKey =  fCompareKey(SSDS),
        .Arc_EOL =  FALSE
    },

    {
        .Arc_EOL =  TRUE
    }
};

static const Dcm_DspSecurityType DspSecurity = {
    .DspSecurityRow =  DspSecurityList
};


static const Dcm_DspSessionRowType DspSessionList[] = {

    { // DS
        .DspSessionLevel =  1,
        .DspSessionP2ServerMax =  5000,
        .DspSessionP2StarServerMax =  5000,
        .Arc_EOL =  FALSE
    },

    { // PRGS
        .DspSessionLevel =  2,
        .DspSessionP2ServerMax =  5000,
        .DspSessionP2StarServerMax =  5000,
        .Arc_EOL =  FALSE
    },

    { // EXTDS
        .DspSessionLevel =  3,
        .DspSessionP2ServerMax =  5000,
        .DspSessionP2StarServerMax =  5000,
        .Arc_EOL =  FALSE
    },

    { // SSDS
        .DspSessionLevel =  4,
        .DspSessionP2ServerMax =  5000,
        .DspSessionP2StarServerMax =  5000,
        .Arc_EOL =  FALSE
    },

    {
        .Arc_EOL =  TRUE
    },
};

static const Dcm_DspSessionType DspSession = {
    .DspSessionRow =  DspSessionList,
};
//************************************************************************
//*                       Data Identifier                                *
//************************************************************************
static const Dcm_DspSessionRowType* SWVersion_DID_sessionRefList[]=
{
	&DspSessionList[2],//Ses_EXTDS,
	&DspSessionList[1],//Ses_PRGS,
	&DspSessionList[DCM_SESSION_EOL_INDEX]
};
static const Dcm_DspSessionRowType* NvMVersion_DID_sessionRefList[]=
{
	&DspSessionList[1],//Ses_PRGS,
	&DspSessionList[2],//Ses_EXTDS,
	&DspSessionList[DCM_SESSION_EOL_INDEX]
};
static const Dcm_DspSessionRowType* FingerPrint_DID_sessionRefList[]=
{
	&DspSessionList[2],//Ses_EXTDS,
	&DspSessionList[DCM_SESSION_EOL_INDEX]
};
static const Dcm_DspSecurityRowType* SWVersion_DID_securityRefList[]=
{
	&DspSecurityList[2],//Sec_PRGS,
	&DspSecurityList[3],//Sec_EXTDS,
	&DspSecurityList[DCM_SECURITY_EOL_INDEX]
};
static const Dcm_DspSecurityRowType* NvMVersion_DID_securityRefList[]=
{
	&DspSecurityList[3],//Sec_EXTDS,
	&DspSecurityList[2],//Sec_PRGS,
	&DspSecurityList[DCM_SECURITY_EOL_INDEX]
};
static const Dcm_DspSecurityRowType* FingerPrint_DID_securityRefList[]=
{
	&DspSecurityList[3],//Sec_EXTDS,
	&DspSecurityList[DCM_SECURITY_EOL_INDEX]
};

static const Dcm_DspDidReadType SWVersion_didAccess = {
    .DspDidReadSessionRef =  SWVersion_DID_sessionRefList,
    .DspDidReadSecurityLevelRef =  SWVersion_DID_securityRefList
};

static const Dcm_DspDidReadType NvMVersion_didAccess = {
    .DspDidReadSessionRef =  NvMVersion_DID_sessionRefList,
    .DspDidReadSecurityLevelRef =  NvMVersion_DID_securityRefList
};

static const Dcm_DspDidReadType FingerPrint_didAccess = {
    .DspDidReadSessionRef =  FingerPrint_DID_sessionRefList,
    .DspDidReadSecurityLevelRef =  FingerPrint_DID_securityRefList
};
static const Dcm_DspSessionRowType* LedControl_DID_sessionRefList[]=
{
	&DspSessionList[2],//Ses_EXTDS,
	&DspSessionList[DCM_SESSION_EOL_INDEX]
};
static const Dcm_DspSessionRowType* SpeedControl_DID_sessionRefList[]=
{
	&DspSessionList[2],//Ses_EXTDS,
	&DspSessionList[DCM_SESSION_EOL_INDEX]
};
static const Dcm_DspSecurityRowType* LedControl_DID_securityRefList[]=
{
	&DspSecurityList[3],//Sec_EXTDS,
	&DspSecurityList[DCM_SECURITY_EOL_INDEX]
};
static const Dcm_DspSecurityRowType* SpeedControl_DID_securityRefList[]=
{
	&DspSecurityList[3],//Sec_EXTDS,
	&DspSecurityList[DCM_SECURITY_EOL_INDEX]
};

static const Dcm_DspDidControlRecordSizesType LedControl_STA_Size = {
    .DspDidControlEnableMaskRecordSize = 0,
    .DspDidControlOptionRecordSize = 1,
    .DspDidControlStatusRecordSize = 1
};

static const Dcm_DspDidControlRecordSizesType LedControl_RCTE_Size = {
    .DspDidControlEnableMaskRecordSize = 0,
    .DspDidControlOptionRecordSize = 0,
    .DspDidControlStatusRecordSize = 1
};

static const Dcm_DspDidControlRecordSizesType SpeedControl_STA_Size = {
    .DspDidControlEnableMaskRecordSize = 0,
    .DspDidControlOptionRecordSize = 1,
    .DspDidControlStatusRecordSize = 1
};

static const Dcm_DspDidControlRecordSizesType SpeedControl_RCTE_Size = {
    .DspDidControlEnableMaskRecordSize = 0,
    .DspDidControlOptionRecordSize = 0,
    .DspDidControlStatusRecordSize = 1
};

static const Dcm_DspDidControlRecordSizesType SpeedControl_FCS_Size = {
    .DspDidControlEnableMaskRecordSize = 0,
    .DspDidControlOptionRecordSize = 0,
    .DspDidControlStatusRecordSize = 1
};

static const Dcm_DspDidControlType LedControl_didControl = {
    .DspDidControlSessionRef =  LedControl_DID_sessionRefList,
    .DspDidControlSecurityLevelRef =  LedControl_DID_securityRefList,
    .DspDidFreezeCurrentState = NULL,
    .DspDidResetToDefault = NULL,
    .DspDidReturnControlToEcu = &LedControl_RCTE_Size,
    .DspDidShortTermAdjustment = &LedControl_STA_Size
};

static const Dcm_DspDidControlType SpeedControl_didControl = {
    .DspDidControlSessionRef =  SpeedControl_DID_sessionRefList,
    .DspDidControlSecurityLevelRef =  SpeedControl_DID_securityRefList,
    .DspDidFreezeCurrentState = &SpeedControl_FCS_Size,
    .DspDidResetToDefault = NULL,
    .DspDidReturnControlToEcu = &SpeedControl_RCTE_Size,
    .DspDidShortTermAdjustment = &SpeedControl_STA_Size
};

static const Dcm_DspDidInfoType DspDidInfoList[] = {
    
    {    
         .DspDidDynamicllyDefined =  TRUE,
         .DspDidFixedLength =  FALSE, // for easy implementation, all DID length is dynamic.
         .DspDidScalingInfoSize =  (uint8)0xdead,
         .DspDidAccess.DspDidRead  =&SWVersion_didAccess,
         .DspDidAccess.DspDidWrite = (Dcm_DspDidWriteType*)&SWVersion_didAccess, // for easy implementation, use the same one as read
         .DspDidAccess.DspDidControl = NULL,
    },

    {    
         .DspDidDynamicllyDefined =  TRUE,
         .DspDidFixedLength =  FALSE, // for easy implementation, all DID length is dynamic.
         .DspDidScalingInfoSize =  (uint8)0xdead,
         .DspDidAccess.DspDidRead  =&NvMVersion_didAccess,
         .DspDidAccess.DspDidWrite = (Dcm_DspDidWriteType*)&NvMVersion_didAccess, // for easy implementation, use the same one as read
         .DspDidAccess.DspDidControl = NULL,
    },

    {    
         .DspDidDynamicllyDefined =  FALSE,
         .DspDidFixedLength =  FALSE, // for easy implementation, all DID length is dynamic.
         .DspDidScalingInfoSize =  (uint8)0xdead,
         .DspDidAccess.DspDidRead  =&FingerPrint_didAccess,
         .DspDidAccess.DspDidWrite = (Dcm_DspDidWriteType*)&FingerPrint_didAccess, // for easy implementation, use the same one as read
         .DspDidAccess.DspDidControl = NULL,
    },

    {    
         .DspDidDynamicllyDefined =  FALSE,
         .DspDidFixedLength =  FALSE, // not used
         .DspDidScalingInfoSize =  (uint8)0xdead,
         .DspDidAccess.DspDidRead  = NULL,
         .DspDidAccess.DspDidWrite = NULL,
         .DspDidAccess.DspDidControl = &LedControl_didControl,
    },

    {    
         .DspDidDynamicllyDefined =  FALSE,
         .DspDidFixedLength =  FALSE, // not used
         .DspDidScalingInfoSize =  (uint8)0xdead,
         .DspDidAccess.DspDidRead  = NULL,
         .DspDidAccess.DspDidWrite = NULL,
         .DspDidAccess.DspDidControl = &SpeedControl_didControl,
    },

};
extern const Dcm_DspDidType DspDidList[];
const Dcm_DspDidType* TODO_RWDID_RefList[] =
{
    &DspDidList[DCM_DID_LIST_EOL_INDEX]  //add did ref by hand please,If you need it
};


const Dcm_DspDidType DspDidList[] = { 

    { // RWDID,rwpd,Note: Length of DID is all dynamic, provided by app.
        .DspDidUsePort =  FALSE,//.Value is not configurable
        .DspDidIdentifier =  0xF201,   
        .DspDidInfoRef =  &DspDidInfoList[2],
        .DspDidRef =  TODO_RWDID_RefList,    // TODO:
        .DspDidSize = 0xdead,
        .DspDidReadDataLengthFnc =  fDidGetDataLength(SWVersion),
        .DspDidConditionCheckReadFnc =  fDidConditionReadCheck(SWVersion),
        .DspDidReadDataFnc =  fDidReadData(SWVersion),
        .DspDidConditionCheckWriteFnc =  fDidConditionCheckWrite(SWVersion),
        .DspDidWriteDataFnc =  fDidWriteData(SWVersion),
        .DspDidGetScalingInfoFnc =  NULL,
        .DspDidFreezeCurrentStateFnc =  NULL,
        .DspDidResetToDefaultFnc =  NULL,
        .DspDidReturnControlToEcuFnc =  NULL,
        .DspDidShortTermAdjustmentFnc =  NULL,
        .DspDidControlRecordSize =  NULL,
        .Arc_EOL =  FALSE
    },
    { // RWDID,rwpd,
        .DspDidUsePort =  FALSE,//.Value is not configurable
        .DspDidIdentifier =  0xF202,   
        .DspDidInfoRef =  &DspDidInfoList[3],
        .DspDidRef =  TODO_RWDID_RefList,    // TODO:
        .DspDidSize = 0xdead,
        .DspDidReadDataLengthFnc =  fDidGetDataLength(NvMVersion),
        .DspDidConditionCheckReadFnc =  fDidConditionReadCheck(NvMVersion),
        .DspDidReadDataFnc =  fDidReadData(NvMVersion),
        .DspDidConditionCheckWriteFnc =  fDidConditionCheckWrite(NvMVersion),
        .DspDidWriteDataFnc =  fDidWriteData(NvMVersion),
        .DspDidGetScalingInfoFnc =  NULL,
        .DspDidFreezeCurrentStateFnc =  NULL,
        .DspDidResetToDefaultFnc =  NULL,
        .DspDidReturnControlToEcuFnc =  NULL,
        .DspDidShortTermAdjustmentFnc =  NULL,
        .DspDidControlRecordSize =  NULL,
        .Arc_EOL =  FALSE
    },
    { // RWDID,rwp,for program
        .DspDidUsePort =  FALSE,//.Value is not configurable
        .DspDidIdentifier =  0xF203,   
        .DspDidInfoRef =  &DspDidInfoList[4],
        .DspDidRef =  TODO_RWDID_RefList,    // TODO:
        .DspDidSize = 0xdead,
        .DspDidReadDataLengthFnc =  fDidGetDataLength(FingerPrint),
        .DspDidConditionCheckReadFnc =  fDidConditionReadCheck(FingerPrint),
        .DspDidReadDataFnc =  fDidReadData(FingerPrint),
        .DspDidConditionCheckWriteFnc =  fDidConditionCheckWrite(FingerPrint),
        .DspDidWriteDataFnc =  fDidWriteData(FingerPrint),
        .DspDidGetScalingInfoFnc =  NULL,
        .DspDidFreezeCurrentStateFnc =  NULL,
        .DspDidResetToDefaultFnc =  NULL,
        .DspDidReturnControlToEcuFnc =  NULL,
        .DspDidShortTermAdjustmentFnc =  NULL,
        .DspDidControlRecordSize =  NULL,
        .Arc_EOL =  FALSE
    },
    { // IOControl,
        .DspDidUsePort =  FALSE,//.Value is not configurable
        .DspDidIdentifier =  0xAB04,   
        .DspDidInfoRef =  &DspDidInfoList[3],
        .DspDidRef =  NULL,
        .DspDidSize = 0xdead,
        .DspDidReadDataLengthFnc =  NULL,
        .DspDidConditionCheckReadFnc =  NULL,
        .DspDidReadDataFnc =  NULL,
        .DspDidConditionCheckWriteFnc =  NULL,
        .DspDidWriteDataFnc =  NULL,
        .DspDidGetScalingInfoFnc =  NULL,
        .DspDidFreezeCurrentStateFnc =  fDidFreezeCurrentState(LedControl),
        .DspDidResetToDefaultFnc =  fDidResetToDefault(LedControl),
        .DspDidReturnControlToEcuFnc =  fDidReturnControlToEcu(LedControl),
        .DspDidShortTermAdjustmentFnc =  fDidShortTermAdjustment(LedControl),
        .DspDidControlRecordSize =  NULL,
        .Arc_EOL =  FALSE
    },
    { // IOControl,
        .DspDidUsePort =  FALSE,//.Value is not configurable
        .DspDidIdentifier =  0xAB05,   
        .DspDidInfoRef =  &DspDidInfoList[4],
        .DspDidRef =  NULL,
        .DspDidSize = 0xdead,
        .DspDidReadDataLengthFnc =  NULL,
        .DspDidConditionCheckReadFnc =  NULL,
        .DspDidReadDataFnc =  NULL,
        .DspDidConditionCheckWriteFnc =  NULL,
        .DspDidWriteDataFnc =  NULL,
        .DspDidGetScalingInfoFnc =  NULL,
        .DspDidFreezeCurrentStateFnc =  fDidFreezeCurrentState(SpeedControl),
        .DspDidResetToDefaultFnc =  fDidResetToDefault(SpeedControl),
        .DspDidReturnControlToEcuFnc =  fDidReturnControlToEcu(SpeedControl),
        .DspDidShortTermAdjustmentFnc =  fDidShortTermAdjustment(SpeedControl),
        .DspDidControlRecordSize =  NULL,
        .Arc_EOL =  FALSE
    },
    {
        .Arc_EOL =  TRUE
    }
};

//************************************************************************
//*                       Routine control                                *
//************************************************************************
static const Dcm_DspSessionRowType* Erase_RC_sessionRefList[]=
{
	&DspSessionList[2],//Ses_EXTDS,
	&DspSessionList[DCM_SESSION_EOL_INDEX]
};
static const Dcm_DspSessionRowType* CheckIntegrity_RC_sessionRefList[]=
{
	&DspSessionList[2],//Ses_EXTDS,
	&DspSessionList[DCM_SESSION_EOL_INDEX]
};
static const Dcm_DspSecurityRowType* Erase_RC_securityRefList[]=
{
	&DspSecurityList[3],//Sec_EXTDS,
	&DspSecurityList[DCM_SECURITY_EOL_INDEX]
};
static const Dcm_DspSecurityRowType* CheckIntegrity_RC_securityRefList[]=
{
	&DspSecurityList[3],//Sec_EXTDS,
	&DspSecurityList[DCM_SECURITY_EOL_INDEX]
};

static const Dcm_DspStartRoutineType Erase_Start_Size = {
    .DspStartRoutineCtrlOptRecSize = 1,
    .DspStartRoutineStsOptRecSize = 1,
};

static const Dcm_DspRoutineStopType Erase_Stop_Size = {
    .DspStopRoutineCtrlOptRecSize = 0,
    .DspStopRoutineStsOptRecSize = 1,
};

static const Dcm_DspRoutineRequestResType Erase_Result_Size = {
    .DspReqResRtnCtrlOptRecSize = 1,
};

static const Dcm_DspStartRoutineType CheckIntegrity_Start_Size = {
    .DspStartRoutineCtrlOptRecSize = 1,
    .DspStartRoutineStsOptRecSize = 1,
};

static const Dcm_DspRoutineStopType CheckIntegrity_Stop_Size = {
    .DspStopRoutineCtrlOptRecSize = 0,
    .DspStopRoutineStsOptRecSize = 1,
};

static const Dcm_DspRoutineRequestResType CheckIntegrity_Result_Size = {
    .DspReqResRtnCtrlOptRecSize = 1,
};

static const Dcm_DspRoutineInfoType DspRoutineInfoList[] = {

    { // Erase
         .DspRoutineAuthorization.DspRoutineSessionRef =  Erase_RC_sessionRefList,
         .DspRoutineAuthorization.DspRoutineSecurityLevelRef =  Erase_RC_securityRefList,
         .DspStartRoutine =  &Erase_Start_Size,
         .DspRoutineStop =  &Erase_Stop_Size,
         .DspRoutineRequestRes =  &Erase_Result_Size,
    },

    { // CheckIntegrity
         .DspRoutineAuthorization.DspRoutineSessionRef =  CheckIntegrity_RC_sessionRefList,
         .DspRoutineAuthorization.DspRoutineSecurityLevelRef =  CheckIntegrity_RC_securityRefList,
         .DspStartRoutine =  &CheckIntegrity_Start_Size,
         .DspRoutineStop =  &CheckIntegrity_Stop_Size,
         .DspRoutineRequestRes =  &CheckIntegrity_Result_Size,
    },

};


static const Dcm_DspRoutineType  DspRoutineList[] = {

    { //Erase,
         .DspRoutineUsePort =  FALSE,
         .DspRoutineIdentifier =  0xAB07,
         .DspRoutineInfoRef =  &DspRoutineInfoList[0],
         .DspStartRoutineFnc =  fStartRoutine(Erase),
         .DspStopRoutineFnc =  fStopRoutine(Erase),
         .DspRequestResultRoutineFnc =  fRequestResultRoutine(Erase),
         .Arc_EOL = FALSE
    },

    { //CheckIntegrity,
         .DspRoutineUsePort =  FALSE,
         .DspRoutineIdentifier =  0xAB07,
         .DspRoutineInfoRef =  &DspRoutineInfoList[1],
         .DspStartRoutineFnc =  fStartRoutine(CheckIntegrity),
         .DspStopRoutineFnc =  fStopRoutine(CheckIntegrity),
         .DspRequestResultRoutineFnc =  fRequestResultRoutine(CheckIntegrity),
         .Arc_EOL = FALSE
    },

    {
         .Arc_EOL = TRUE
    }
};


//************************************************************************
//*                            Memory Info                                 *
//***********************************************************************

const Dcm_DspType Dsp = {
    .DspMaxDidToRead =  (uint8)0xdead, // TODO: what does it mean?
    .DspDid =  DspDidList,
    .DspDidInfo =  DspDidInfoList,
    .DspEcuReset =  NULL,
    .DspPid =  NULL,
    .DspReadDTC =  NULL,
    .DspRequestControl =  NULL,
    .DspRoutine =  DspRoutineList,
    .DspRoutineInfo =  DspRoutineInfoList,
    .DspSecurity =  &DspSecurity,
    .DspSession =  &DspSession,
    .DspTestResultByObdmid =  NULL,
    .DspVehInfo =  NULL
};

static const Dcm_DspSessionRowType* EcuReset_SessionList[]=
{
	&DspSessionList[1],//Ses_PRGS,
	&DspSessionList[0],//Ses_DS,
	&DspSessionList[DCM_SESSION_EOL_INDEX]
};
static const Dcm_DspSecurityRowType* EcuReset_SecurityList[]=
{
	&DspSecurityList[1],//Sec_DS,
	&DspSecurityList[2],//Sec_PRGS,
	&DspSecurityList[DCM_SECURITY_EOL_INDEX]
};
static const Dcm_DspSessionRowType* CommunicationControl_SessionList[]=
{
	&DspSessionList[2],//Ses_EXTDS,
	&DspSessionList[1],//Ses_PRGS,
	&DspSessionList[DCM_SESSION_EOL_INDEX]
};
static const Dcm_DspSecurityRowType* CommunicationControl_SecurityList[]=
{
	&DspSecurityList[2],//Sec_PRGS,
	&DspSecurityList[3],//Sec_EXTDS,
	&DspSecurityList[DCM_SECURITY_EOL_INDEX]
};

//************************************************************************
//*                                    DSD                                    *
//***********************************************************************

const Dcm_DsdServiceType DIAG_P2PorP2A_serviceList[] = {
    {
         .DsdSidTabServiceId = SID_DIAGNOSTIC_SESSION_CONTROL,
         .DsdSidTabSubfuncAvail = True,
         .DsdSidTabSecurityLevelRef = NULL,
         .DsdSidTabSessionLevelRef  = NULL,
         .Arc_EOL =  FALSE
    },
    {
         .DsdSidTabServiceId = SID_SECURITY_ACCESS,
         .DsdSidTabSubfuncAvail = True,
         .DsdSidTabSecurityLevelRef = NULL,
         .DsdSidTabSessionLevelRef  = NULL,
         .Arc_EOL =  FALSE
    },
    {
         .DsdSidTabServiceId = SID_READ_DATA_BY_IDENTIFIER,
         .DsdSidTabSubfuncAvail = True,
         .DsdSidTabSecurityLevelRef = NULL,
         .DsdSidTabSessionLevelRef  = NULL,
         .Arc_EOL =  FALSE
    },
    {
         .DsdSidTabServiceId = SID_WRITE_DATA_BY_IDENTIFIER,
         .DsdSidTabSubfuncAvail = True,
         .DsdSidTabSecurityLevelRef = NULL,
         .DsdSidTabSessionLevelRef  = NULL,
         .Arc_EOL =  FALSE
    },
    {
         .DsdSidTabServiceId = SID_ROUTINE_CONTROL,
         .DsdSidTabSubfuncAvail = FALSE,
         .DsdSidTabSecurityLevelRef = NULL,
         .DsdSidTabSessionLevelRef  = NULL,
         .Arc_EOL =  FALSE
    },
    {
         .DsdSidTabServiceId = SID_READ_SCALING_DATA_BY_IDENTIFIER,
         .DsdSidTabSubfuncAvail = FALSE,
         .DsdSidTabSecurityLevelRef = NULL,
         .DsdSidTabSessionLevelRef  = NULL,
         .Arc_EOL =  FALSE
    },
    { 
         .DsdSidTabServiceId = SID_TESTER_PRESENT,
         .DsdSidTabSubfuncAvail = FALSE,
         .DsdSidTabSecurityLevelRef = NULL,
         .DsdSidTabSessionLevelRef  = NULL,
         .Arc_EOL =  FALSE
    },
    { 
         .DsdSidTabServiceId = SID_ECU_RESET,
         .DsdSidTabSubfuncAvail = FALSE,
         .DsdSidTabSecurityLevelRef = EcuReset_SecurityList,
         .DsdSidTabSessionLevelRef  = EcuReset_SessionList,
         .Arc_EOL =  FALSE
    },
    { 
         .DsdSidTabServiceId = SID_DYNAMICALLY_DEFINE_DATA_IDENTIFIER,
         .DsdSidTabSubfuncAvail = FALSE,
         .DsdSidTabSecurityLevelRef = NULL,
         .DsdSidTabSessionLevelRef  = NULL,
         .Arc_EOL =  FALSE
    },
    { 
         .DsdSidTabServiceId = SID_READ_DATA_BY_PERIODIC_IDENTIFIER,
         .DsdSidTabSubfuncAvail = FALSE,
         .DsdSidTabSecurityLevelRef = NULL,
         .DsdSidTabSessionLevelRef  = NULL,
         .Arc_EOL =  FALSE
    },
    {
         .DsdSidTabServiceId = SID_INPUT_OUTPUT_CONTROL_BY_IDENTIFIER,
         .DsdSidTabSubfuncAvail = TRUE,
         .DsdSidTabSecurityLevelRef = NULL,
         .DsdSidTabSessionLevelRef  = NULL,
         .Arc_EOL =  FALSE
    },
    { 
         .DsdSidTabServiceId = SID_READ_MEMORY_BY_ADDRESS,
         .DsdSidTabSubfuncAvail = FALSE,
         .DsdSidTabSecurityLevelRef = NULL,
         .DsdSidTabSessionLevelRef  = NULL,
         .Arc_EOL =  FALSE
    },
    { 
         .DsdSidTabServiceId = SID_WRITE_MEMORY_BY_ADDRESS,
         .DsdSidTabSubfuncAvail = FALSE,
         .DsdSidTabSecurityLevelRef = NULL,
         .DsdSidTabSessionLevelRef = NULL,
         .Arc_EOL =  FALSE
    },    
    { 
         .DsdSidTabServiceId = SID_COMMUNICATION_CONTROL,
         .DsdSidTabSubfuncAvail = FALSE,
         .DsdSidTabSecurityLevelRef = CommunicationControl_SecurityList,
         .DsdSidTabSessionLevelRef = CommunicationControl_SessionList,
         .Arc_EOL =  FALSE
    },
    {
         .Arc_EOL =  TRUE
    }
};

const Dcm_DsdServiceTableType DsdServiceTable[] = {    
    {
         .DsdSidTabId =  0,
         .DsdService =  DIAG_P2PorP2A_serviceList,
         .Arc_EOL =  FALSE
    },
    {
         .Arc_EOL =  TRUE
    }
};

const Dcm_DsdType Dsd = {
    .DsdServiceTable =  DsdServiceTable
};    
    

//************************************************************************
//*                                    DSL                                    *
//***********************************************************************

static uint8 rxDcmBuffer_DiagP2P[512];
static Dcm_DslBufferRuntimeType rxBufferParams_DiagP2P =
{
    .status =  NOT_IN_USE
};
static uint8 txDcmBuffer_DiagP2P[512];
static Dcm_DslBufferRuntimeType txBufferParams_DiagP2P =
{
    .status =  NOT_IN_USE
};
static uint8 rxDcmBuffer_DiagP2A[512];
static Dcm_DslBufferRuntimeType rxBufferParams_DiagP2A =
{
    .status =  NOT_IN_USE
};
static uint8 txDcmBuffer_DiagP2A[512];
static Dcm_DslBufferRuntimeType txBufferParams_DiagP2A =
{
    .status =  NOT_IN_USE
};
static const Dcm_DslBufferType DcmDslBufferList[DCM_DSL_BUFFER_LIST_LENGTH] = {
    {
        .DslBufferID =  0,    //? I am not that clear.
        .DslBufferSize =  512,//.?Value is not configurable
        .pduInfo.SduDataPtr =  rxDcmBuffer_DiagP2P,
        .pduInfo.SduLength =  512,
        .externalBufferRuntimeData =  &rxBufferParams_DiagP2P
    },
    {
        .DslBufferID =  1,//? I am not that clear.
        .DslBufferSize =  512,//.?Value is not configurable
        .pduInfo.SduDataPtr =  txDcmBuffer_DiagP2P,
        .pduInfo.SduLength =  512,
        .externalBufferRuntimeData =  &txBufferParams_DiagP2P
    },
    {
        .DslBufferID =  0,//? I am not that clear.
        .DslBufferSize =  512,//.?Value is not configurable
        .pduInfo.SduDataPtr =  rxDcmBuffer_DiagP2A,
        .pduInfo.SduLength =  512,
        .externalBufferRuntimeData =  &rxBufferParams_DiagP2P
    },
    {
        .DslBufferID =  1,//? I am not that clear.
        .DslBufferSize =  512,//.?Value is not configurable
        .pduInfo.SduDataPtr =  txDcmBuffer_DiagP2A,
        .pduInfo.SduLength =  512,
        .externalBufferRuntimeData =  &txBufferParams_DiagP2A
    }
};

static const Dcm_DslCallbackDCMRequestServiceType DCMRequestServiceList[] = {
    { // vRequestService_1
        .StartProtocol =  Diag_RequestServiceStart,  // must at least config one
        .StopProtocol =   Diag_RequestServiceStop,
        .Arc_EOL =  FALSE
    },
    {
        .Arc_EOL =  TRUE
    }
};

static const Dcm_DslServiceRequestIndicationType DCMServiceRequestIndicationList[] = {
    {
        .Indication =  Diag_RequestServiceIndication, // can ignore this configure when turn DCM_REQUEST_INDICATION_ENABLED STD_OFF
        .Arc_EOL =  FALSE
    },
    {
        .Arc_EOL =  TRUE
    }
};

extern const Dcm_DslMainConnectionType DslMainConnectionList[];

static const Dcm_DslProtocolRxType DcmDslProtocolRxList[] = {
    {
        .DslMainConnectionParent =  &DslMainConnectionList[DCM_DIAG_P2P_REQ],
        .DslProtocolAddrType =  DCM_PROTOCOL_PHYSICAL_ADDR_TYPE,
        .DcmDslProtocolRxPduId =  PDUR_DIAG_P2P_REQ,
        .DcmDslProtocolRxTesterSourceAddr_v4 =  0,        //.Value is not configurable
        .DcmDslProtocolRxChannelId_v4 =  0,                //.Value is not configurable
        .Arc_EOL =  FALSE
    },
    {
        .DslMainConnectionParent =  &DslMainConnectionList[DCM_DIAG_P2A_REQ],
        .DslProtocolAddrType =  DCM_PROTOCOL_PHYSICAL_ADDR_TYPE,
        .DcmDslProtocolRxPduId =  PDUR_DIAG_P2A_REQ,
        .DcmDslProtocolRxTesterSourceAddr_v4 =  0,        //.Value is not configurable
        .DcmDslProtocolRxChannelId_v4 =  0,                //.Value is not configurable
        .Arc_EOL =  FALSE
    },
    {
        .Arc_EOL =  TRUE
    }
};

static const Dcm_DslProtocolTxType DcmDslProtocolTxList[] = {
    {
        .DslMainConnectionParent =  &DslMainConnectionList[DCM_DIAG_P2P_ACK],
        .DcmDslProtocolTxPduId =  PDUR_DIAG_P2P_ACK,
        .DcmDslProtocolDcmTxPduId = DCM_DIAG_P2P_ACK,
        .Arc_EOL =  FALSE
    },
    {
        .DslMainConnectionParent =  &DslMainConnectionList[DCM_DIAG_P2A_ACK],
        .DcmDslProtocolTxPduId =  PDUR_DIAG_P2A_ACK,
        .DcmDslProtocolDcmTxPduId = DCM_DIAG_P2A_ACK,
        .Arc_EOL =  FALSE
    },
    {
        .Arc_EOL =  TRUE
    }
};

extern const Dcm_DslConnectionType DslConnectionList[];

const Dcm_DslMainConnectionType DslMainConnectionList[] = {
    {
        .DslConnectionParent =  &DslConnectionList[DCM_DIAG_P2P_REQ],
        .DslPeriodicTransmissionConRef =  NULL,        //.Value is not configurable
        .DslROEConnectionRef =  NULL,                //.Value is not configurable
        .DslProtocolRx =  NULL,                        //.Value is not configurable
        .DslProtocolTx =  &DcmDslProtocolTxList[DCM_DIAG_P2P_ACK],
    },
    {
        .DslConnectionParent =  &DslConnectionList[DCM_DIAG_P2A_REQ],
        .DslPeriodicTransmissionConRef =  NULL,        //.Value is not configurable
        .DslROEConnectionRef =  NULL,                //.Value is not configurable
        .DslProtocolRx =  NULL,                        //.Value is not configurable
        .DslProtocolTx =  &DcmDslProtocolTxList[DCM_DIAG_P2A_ACK],
    },
};

extern const Dcm_DslProtocolRowType DslProtocolRowList[];

const Dcm_DslConnectionType DslConnectionList[] = {
    {
        .DslProtocolRow =  &DslProtocolRowList[DCM_DIAG_P2P_REQ],
        .DslMainConnection =  &DslMainConnectionList[DCM_DIAG_P2P_REQ],
        .DslPeriodicTransmission =  NULL,    //.Value is not configurable
        .DslResponseOnEvent =  NULL,    //.Value is not configurable
        .Arc_EOL =  FALSE
    },
    {
        .DslProtocolRow =  &DslProtocolRowList[DCM_DIAG_P2A_REQ],
        .DslMainConnection =  &DslMainConnectionList[DCM_DIAG_P2A_REQ],
        .DslPeriodicTransmission =  NULL,    //.Value is not configurable
        .DslResponseOnEvent =  NULL,    //.Value is not configurable
        .Arc_EOL =  FALSE
    },
    {
        .Arc_EOL =  TRUE
    }
};

extern const Dcm_DslProtocolTimingRowType ProtocolTimingList[];

Dcm_DslRunTimeProtocolParametersType dcmDslRuntimeVariables[2]; // for DIAG_P2P and DIAG_P2A
const Dcm_DslProtocolRowType DslProtocolRowList[]= {
    {
        .DslProtocolID =  DCM_UDS_ON_CAN,
        .DslProtocolIsParallelExecutab =  FALSE, // not supported
        .DslProtocolPreemptTimeout =  0,    // not supported
        .DslProtocolPriority =  0,    // not supported
        .DslProtocolTransType =  DCM_PROTOCOL_TRANS_TYPE_1,
        .DslProtocolRxBufferID =  &DcmDslBufferList[2*DCM_DIAG_P2P_REQ+0],
        .DslProtocolTxBufferID =  &DcmDslBufferList[2*DCM_DIAG_P2P_REQ+1],
        .DslProtocolSIDTable =  &DsdServiceTable[0],
        .DslProtocolTimeLimit =  &ProtocolTimingList[0],
        .DslConnection =  DslConnectionList,
        .DslRunTimeProtocolParameters =  &dcmDslRuntimeVariables[DCM_DIAG_P2P_REQ],
        .Arc_EOL =  FALSE
    },
    {
        .DslProtocolID =  DCM_UDS_ON_CAN,
        .DslProtocolIsParallelExecutab =  FALSE, // not supported
        .DslProtocolPreemptTimeout =  0,    // not supported
        .DslProtocolPriority =  0,    // not supported
        .DslProtocolTransType =  DCM_PROTOCOL_TRANS_TYPE_1,
        .DslProtocolRxBufferID =  &DcmDslBufferList[2*DCM_DIAG_P2A_REQ+0],
        .DslProtocolTxBufferID =  &DcmDslBufferList[2*DCM_DIAG_P2A_REQ+1],
        .DslProtocolSIDTable =  &DsdServiceTable[0],
        .DslProtocolTimeLimit =  &ProtocolTimingList[0],
        .DslConnection =  DslConnectionList,
        .DslRunTimeProtocolParameters =  &dcmDslRuntimeVariables[DCM_DIAG_P2A_REQ],
        .Arc_EOL =  FALSE
    },
    {
        .Arc_EOL = TRUE
    }
};

const Dcm_DslProtocolType DslProtocol = {
    .DslProtocolRxGlobalList =  DcmDslProtocolRxList,
    .DslProtocolTxGlobalList =  DcmDslProtocolTxList,
    .DslProtocolRowList =  DslProtocolRowList
};

const Dcm_DslProtocolTimingRowType ProtocolTimingList[] = {
    {
        .TimStrP2ServerMax =  5000,        // ms
        .TimStrP2ServerMin =  3000,
        .TimStrP2StarServerMax =  0,        //.Value is not configurable
        .TimStrP2StarServerMin =  0,        //.Value is not configurable
        .TimStrS3Server =  5000,
        .Arc_EOL =  FALSE
    },
    {
        .Arc_EOL =  TRUE
    },
};

const Dcm_DslProtocolTimingType ProtocolTiming = {
    .DslProtocolTimingRow =  ProtocolTimingList
};

const Dcm_DslSessionControlType SessionControlList[] = {
    {
         .GetSesChgPermission =  Diag_GetSesChgPer,
         .ChangeIndication =  NULL,
         .ConfirmationRespPend =  NULL,
         .Arc_EOL =  FALSE
    },
    {
         .Arc_EOL =  TRUE
    }
};

const Dcm_DslDiagRespType DiagResp = {
    .DslDiagRespForceRespPendEn =  TRUE,
    .DslDiagRespMaxNumRespPend =  10
};

const Dcm_DslType Dsl = {
    .DslBuffer =  DcmDslBufferList,
    .DslCallbackDCMRequestService =  DCMRequestServiceList,
    .DslDiagResp =  &DiagResp,
    .DslProtocol =  &DslProtocol,
    .DslProtocolTiming =  &ProtocolTiming,
    .DslServiceRequestIndication =  DCMServiceRequestIndicationList,
    .DslSessionControl =  SessionControlList
};

const Dcm_ConfigType DCM_Config = {
    .Dsp =  &Dsp,
    .Dsd =  &Dsd,
    .Dsl =  &Dsl
};

